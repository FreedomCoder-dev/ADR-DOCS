# ADR - Выбор Архитектурного Подхода

**Участники:**
- Мухорин
- Мухин
- Пряшников

**Дата:** 21 сент. 2024 г.

**Статус:** Решается

## Контекст

- Команда: 3 балбеса
  - все трое сдали ООП малову на 5
  - один балбес знает все языки программирования и иммет опыт работы со всеми архитектурами
- Бюджет: 3 хотдога в неделю 
- Ресурсы: доступен проектный сервер (уже оплачен на 10 лет), два старых ноутбука, один модный MacBook Pro M1 Max 14" 64G 1Tb
- Сроки: на реализацию MVP имеется 6 месяцев
- Целевая аудитория: компании, отказывающиеся от зарубежных решений по редактированию документов.

Надо разработать систему онлайн документов с возможностью совместного доступа и редактирования для проекта в универе

## Рассматриваемые варианты

- Serverless
  
  - **Масштабируемость:** Автоматическое масштабирование в зависимости от нагрузки позволяет эффективно обрабатывать переменные объемы трафика.
  - **Упрощенное управление:** Нет необходимости управлять серверами, что снижает операционные затраты и позволяет сосредоточиться на разработке функционала.
  - **Оплата по факту использования:** Оплата только за фактическое использование ресурсов, что экономически выгодно при непостоянной нагрузке.
    
  - **Vendor-lock:** ПО будет зависеть от решений облачного провайдера, что может сделать переезд 
  - **Ограничения по времени выполнения:** Функции могут иметь ограничения по времени выполнения (например, AWS Lambda имеет ограничение в 15 минут).
  - **Задержки:** Возможны задержки при холодном старте функций, что может негативно сказаться на пользовательском опыте.
  - **Сложности в отладке:** Отладка и мониторинг могут быть сложнее по сравнению с традиционной серверной архитектурой.
    
- Серверная архитектура
    
  - **Контроль над инфраструктурой:** Полный контроль над серверной частью позволяет более гибко настраивать систему под специфические требования + мы имеем компетенции для администрирования такого ресурса
  - **Независимость:** Свобода выбора в технологиях, независимость от провайдера
  - **Постоянное соединение:** Легче поддерживать постоянные соединения для синхронизации данных в реальном времени.
  - **Более простая отладка:** Локальная среда разработки и отладки может быть проще в настройке и использовании.
  
  - **Масштабируемость:** Масштабирование требует дополнительных усилий и может быть сложным при резком увеличении нагрузки.
  - **Операционные затраты:** Необходимость управления серверами увеличивает операционные затраты и требует дополнительных ресурсов.
  - **Резервирование ресурсов:** Необходимость резервирования ресурсов может привести к неэффективному использованию инфраструктуры.
    
- P2P архитектура
  
  - **Отказоустойчивость:** Система не зависит от центрального сервера, что делает ее более устойчивой к сбоям.
  - **Снижение нагрузки на серверы:** Распределение нагрузки между клиентами снижает требования к серверной инфраструктуре.
  - **Приватность данных:** Данные могут передаваться напрямую между пользователями без необходимости хранения на сервере.
  
  - **Сложность реализации:** Реализация P2P-системы может быть сложной из-за необходимости обработки различных сетевых условий и обеспечения безопасности.
  - **Проблемы с синхронизацией:** Обеспечение консистентности данных между различными узлами может быть сложной задачей.
  - **Зависимость от клиентов:** Работоспособность системы зависит от доступности и производительности клиентских устройств.


## Решение

**Серверный**

## Обоснование

Выбор серверного подхода обусловлен следующими факторами:

1. **Доступность:** Клиенты смогут иметь доступ к своим документам в любое время с любого устройства.
2. **Компетенции и сроки:** Наша команда имеет больше опыта в работе с серверной архитектурой, нежели с Managed Cloud, что позволит не допустить серьёзных ошибок на старте и уложиться в сроки.
3. **Независимость** Свобода выбора в технологиях и независимость от провайдера сделают переезд проще
4. **Отказоустойчивость:** На данный момент один сервер будет иметь сниженную отказоустойчивость по сравнению с serverless, что в будущем может быть исправлено переходом на serverless.
5. **Безопасность данных:** Будет обеспечена с помощью application WAF и автоматического резервного копирования.
6. **Рентабельность:** Бюджет и компетенции нашей компании не позволяет использовать бессерверную архитектуру на данный момент. На начальном этапе количество пользователей будет небольшим, что позволяет использовать один сервер. 

## Последствия

**Зависимость от интернет-соединения:** Необходимость подключения к интернету для доступа к документам.
  - **Решение:** Разработка функции офлайн-доступа к ранее загруженным документам.
**Сложности переезда**: При переезде на бессерверную архитектуру нужно переделывать работу с базами данных,
хранением ресурсов и жизненным циклом сервисов. 
  - **Решение:** Зарание закладывать гибкость программного обеспечения и бизнес-процессов работы с релизами.
### Риски
1. **Зависимость системы от единого сервера**
   - **Решение:** Переезд в бессерверную архитектуру

3. **Потенциальные проблемы с масштабируемостью при резком увеличении нагрузки:**
   - **Решение:** Переход на облачные решения с автоматическим масштабированием при увеличении числа пользователей.

## Затронутые области

1. **Инфраструктура:** Необходимость настройки серверов и механизмов развертывания.
2. **Безопасность:** Реализация мер по защите данных и сетевой безопасности.
3. **Пользовательский интерфейс:** Возможность загрузки документов для офлайн доступа.

## История

----
