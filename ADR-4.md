# ADR - **Выбор языка программирования для клиентской части**

**Участники:**
- Мухин
- Мухорин
- Пряшников

**Дата:** 28 сент. 2024 г.

**Статус:** Решено

## Контекст

- Команда: 3 балбеса
  - все трое сдали ООП малову на 5
  - один балбес знает все языки программирования и иммет опыт работы со всеми архитектурами
- Бюджет: 3 хотдога в неделю 
- Ресурсы: доступен проектный сервер (уже оплачен на 10 лет), два старых ноутбука, один модный MacBook Pro M1 Max 14" 64G 1Tb
- Сроки: на реализацию MVP имеется 6 месяцев
- Целевая аудитория: компании, отказывающиеся от зарубежных решений по редактированию документов.
- [Серверное решение](ADR-1.md) с возможностью переезда в Serverless в будущем
- [Golang](ADR-2.md)
- Долгосрок поддержка
- [Модульная архитектура бекенда](ADR-3.md)
- Тонкий клиент на основе Web+PWA

Надо разработать систему онлайн документов с возможностью совместного доступа и редактирования - [Golang](ADR-2.md), реалтайм, расчётная нагрузка до 2000 RPM и 1000 keepalive sessions, приоритет на сокращении длины пакетов, так как канал [выбранного нами сервера](ADR-1.md) составляет всего 100Мбит (фактически 50-70Mbit при средней загрузке сети регионального оператора). 

Фото минимально доступного нашим клиентам оборудования ниже:
![[Pasted image 20240928101811.png]]

## Рассматриваемые варианты

- **JavaScript (TypeScript)**
	- Старомодно
	- База
    - Архитектор одобряет
	- Легко и приятно в разработке
	- Неоптимально, но терпимо работает
	- Мало весит после сжатия
	- Экосистема поражает воображение размерами
    - В нашей команде есть 3 специалиста по этому языку
- Rust-WASM crosscompilation
    - Очень модно
    - Прямая поддержка браузеров не полная
    - Толстый полифилл на JS
    - Разработка иногда напоминает ад
    - Очень быстро работает
    - Мало библиотек
    - В нашей команде есть специалист по этому языку
- Flutter-WEB
    - Нишевое
    - Архитектор одобряет
    - Решение для хипстеров
    - Много модных фич
    - Не хватает множества необходимых фич для веба
    - Кастомный рендеринг
    - Очень медленно работает
    - Просадки фреймрейта до 20-30 fps на несложных приложениях
    - Ужасные размеры бандла
    - Не пойдёт на клиентских камешках
    - В нашей команде есть специалист по этому стеку

## Решение

**JavaScript**

## Обоснование

Выбор JavaScript обусловлен следующими факторами:

1. **Модность:** Старомодное решение, его используют все программисты с древних времён.
2. **Компетенции и сроки:** Наша команда объединяет несколько компетентных  разработчиков на JS, что позволит параллелить работу в рамках модулей и уложиться в сроки.
3. **Одобрение архитектора:** Архитектор одобряет
4. **Разработка командой балбесов:** Язык прост в синтаксисе, модели памяти и интеграции с браузерами - идеально для команды балбесов.
5. **Поддержка:** Легко поддерживать с устоявшимися, battle-tested решениями.

## Последствия

**Плохая производительность клиента:** мощности камешков может не хватить на сложные вычисления.
  - **Решение:** оптимизировать до посинения или выносить вычисления на бекенд.
### Риски
1. **Плохая адаптивность или сложность разработки для мобильных клиентов**
   - **Решение:** с первых дней разрабатывать редактор с Mobile-first in mind

## Затронутые области

1. **Клиентский опыт:** клиентам важно время загрузки и Responsiveness приложения.

## История

----
